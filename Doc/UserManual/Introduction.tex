%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%   BornAgain User Manual
%%
%%   homepage:   http://www.bornagainproject.org
%%
%%   copyright:  Forschungszentrum JÃ¼lich GmbH 2015
%%
%%   license:    Creative Commons CC-BY-SA
%%   
%%   authors:    Scientific Computing Group at MLZ Garching
%%               C. Durniak, M. Ganeva, G. Pospelov, W. Van Herck, J. Wuttke
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\cleardoublepage
\ichapter{Introduction}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\isection{About BornAgain}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\BornAgain\ is a software package
to simulate and fit
reflectometry, off-specular scattering,
and grazing-incidence small-angle scattering (GISAS)
of X-rays and neutrons.
It provides a generic framework
for modeling multilayer samples with smooth or
rough interfaces and with various types of embedded nanoparticles.
Support for neutron polarization and magnetic scattering
is under development.
The name, \BornAgain,
alludes to the central role of the distorted-wave Born
approximation (DWBA) in the physical description of the
scattering process.
\index{Distorted-wave Born approximation}

\BornAgain\ is being developed
by the Scientific Computing Group
of the J\"ulich Centre for Neutron Science (JCNS)
at Heinz Maier-Leibnitz Zentrum (MLZ) Garching, Germany.
It is intended to serve experimentalists in analysing all kinds
of reflectometry data.
It is equally aimed at users of MLZ reflectometers
\cite{mlz:maria,mlz:nrex,mlz:refsans},
at JCNS in-house researchers,
and at the reflectometry and GISAS community at large.
It is the main contribution of JCNS to national \cite{ba:hdri}
and international \cite{ba:sine2020} collaborations
of large-scale facilities for the development of better user software.

\BornAgain\ is released as free and open source software under
the GNU General Public License (GPL, version 3 or higher).
This documentation comes under the Creative Commons license CC-BY-SA.

\Warn{\indent The converse of this liberal policy is
that we cannot guarantee correctness and accuracy of the code.
It is entirely in the responsibility of users
to convince themselves that their data interpretation
is physically meaningful and plausible.}
\Work{\indent\BornAgain\ is still under intense development.
New major versions are released about every two months.
When need arises, bugfix versions are released in between.
It is strongly recommended that users regularly update their installations.}

The software \BornAgain\ embodies nontrivial scientific ideas.
Therefore when \BornAgain\ is used in preparing scientific papers,
it is mandatory to cite the software:
\index{Citation}%
%\marginpar{citation}%
\begin{quote}
C.~Durniak, M.~Ganeva, G.~Pospelov, W.~Van Herck, J.~Wuttke (2015),\newline
BornAgain --- Software for simulating and fitting
X-ray and neutron small-angle scattering at grazing incidence,
version [\ldots],\newline
\url{http://www.bornagainproject.org}
\end{quote}
The initial design of \BornAgain\ owes much
to the widely used program \IsGISAXS\
\index{IsGISAXS@\IsGISAXS}%
\index{Lazzari, R\'emi}%
by R\'emi Lazzari \cite{Laz02,Laz08}.
Therefore when using \BornAgain\ in scientific work,
it might be appropriate to also cite the pioneering papers
by Lazzari \etal\ \cite{Laz02,ReLL09}.

Since version 1.0, \BornAgain\ 
almost completely reproduces the functionality
of \IsGISAXS.
About 20 exemplary simulations have been tested against \IsGISAXS,
and found to agree up to almost the last floating-point digit.
\BornAgain\ goes beyond \IsGISAXS\
in supporting an unrestricted number of layers and particles, 
diffuse reflection from rough layer interfaces and
particles with inner structures.
Support for neutron polarization and magnetic scattering
is under development.
Adhering to a strict object-oriented design,
\BornAgain\ provides a solid base for future extensions
in response to specific user needs.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\isection{About this Manual}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This user manual is complementary to the online documentation
at \url{http://www.bornagainproject.org}.
It does not duplicate information that is more conveniently read online.
Therefore, Sect.~\ref{sec:online} just contains a few pointers to the web site.
The remainder of this manual mostly contains background
on the scattering theory and on the sample models implemented in \BornAgain,
and some documentation of the corresponding \Python\ functions.

\Work{\indent This manual is incomplete.
Several important chapters are still missing.}
Specifically,
we plan to provide documentation on
\begin{itemize}
\item X-ray propagation and scattering,
\index{X-rays!propagation and scattering}%
\index{Wave propagation!X-rays}%
\item polarized neutron propagation and magnetic scattering,
\index{Neutrons!polarization}%
\index{Wave propagation!neutrons, polarized}%
\index{Polarized neutron!propagation and magnetic scattering}%
\item mapping of $\partial\sigma/\partial\Omega$ onto flat detectors,
\index{Detector!mapping the cross section}%
\item scattering by rough interfaces,
\index{Roughness}%
\item scattering by particle assemblies.
\index{Particle assemblies}%
\end{itemize}
We intend to publish these chapters successively,
along with new software release.
To avoid confusion,
starting with release 1.2 the manual carries
the same version number as the software,
even though it is in a less mature state.

\Emph{\indent We urge users to subscribe to our newsletter
(see Sect.~\ref{Snews}),
and to contact us for any question not answered here
or in the online documentation.}

\index{Bug reports}%
We are grateful for all kind of feedback:
criticism, praise, bug reports, feature requests or contributed modules.
If questions go beyond normal user support,
we will be glad to discuss a scientific collaboration.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\isection{Typesetting conventions}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In this manual, we use the following colored boxes to highlight
certain information:

\def\demobox#1{\hspace{5em}\begin{minipage}{.75\textwidth}#1
\end{minipage}\hfill\strut}

\medskip
\demobox{\Warn{\indent Such a box contains
a \textbf{warning} about potential problems
with the software or the documentation.}}

\medskip
\demobox{\Work{\indent This road sign in the margin indicates \textbf{work in progress}.}}

\medskip
\demobox{\Emph{\indent Such a box contains
  an \textbf{important fact}, for instance an equation
  that has a central role in
  the further development of the theory.}}
  
\medskip
\demobox{\Note{\indent Such a box contains
  an \textbf{implementation note} that explains
  how the theory exposed in this manual is actually used in \BornAgain.}}

\medskip
\demobox{\Tuto{\indent Such a box refers to a usage example in the online tutorial,
  e.~g.\ the list of \tuto{72}{all available form factors}.}}

\medskip
Variations of the equation sign
(as $\equiv$, $\coloneqq$, $\doteq$)
are explained in the symbol index, page~\pageref{Snomencl}.
%They are intended to accentuate a line of argument.
%We hope they are helpful even if their usage is not always consistent.
\nomenclature[0 000]{$\coloneqq$}{Defines what is on the left}%
\nomenclature[0 001]{$\eqqcolon$}{Defines what is on the right}%
\nomenclature[0 002]{$\equiv$}{Equal as result of a definition}%
\nomenclature[0 010]{$\simeq$}{Asymptotically equal: equal in an implied limit}%
\nomenclature[0 015]{$\doteq$}{Equal up to first order of a power-law expansion, hence a special case of asymptotic equality}%
See there as well for less common mathematical functions like the 
cardinal sine function ``sinc''.
\nomenclature[2s030 2i030 2n030 2c030]{$\sinc$}{Cardinal sine,
   $\sinc(x)\coloneqq\sin(x)/x$}
